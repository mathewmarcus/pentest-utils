import socket
import sys
import time

server = socket.socket(socket.AF_INET,socket.SOCK_STREAM,socket.SOL_TCP)

server.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
server.bind(('0.0.0.0', 8080))
server.listen()

(client, (ip, port)) = server.accept()
print("Receiving connection {}:{}".format(ip, port))
cmd = b''

while True:
    time.sleep(1)
    cmd_output = client.recv(2048)[len(cmd):]

    sys.stdout.write(cmd_output.decode())
    sys.stdout.flush()

    cmd = bytes(input()+'\n', 'ascii')
    client.send(cmd)
